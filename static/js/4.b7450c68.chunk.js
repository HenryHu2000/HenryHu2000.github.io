"use strict";(self.webpackChunkreact_app=self.webpackChunkreact_app||[]).push([[4],{4:(e,a,r)=>{r.r(a),r.d(a,{default:()=>p});var n=r(43),o=r(478),t=r(579);const l=e=>(0,t.jsx)("div",{className:"token-wrapper",children:(0,t.jsx)("div",{className:"token ".concat(e.colour?e.colour:""," ").concat(e.phantom?"phantom":"")})}),s=e=>{const[a,r]=(0,n.useState)(!1),s=a=>{switch(a){case o.Cc.PlayerOne:return e.gameConfig.playerOneColour;case o.Cc.PlayerTwo:return e.gameConfig.playerTwoColour;default:return}},c=e.tokens.length>=e.gameState.boardHeight,g=a&&!c;return(0,t.jsx)("div",{className:"column ".concat(c?"":"clickable"),onClick:c?void 0:e.onClick,onMouseEnter:()=>{r(!0)},onMouseLeave:()=>{r(!1)},children:e.tokens.map(((a,r)=>(0,t.jsx)(l,{colour:s(a)},"token-".concat(e.index,"-").concat(r)))).concat(g?[(0,t.jsx)(l,{colour:s(e.gameState.currentPlayer),phantom:!0},"token-phantom")]:[]).concat(Array(e.gameState.boardHeight-e.tokens.length-(g?1:0)).fill(void 0).map(((a,r)=>(0,t.jsx)(l,{},"token-".concat(e.index,"-").concat(r+e.tokens.length))))).reverse()})},c=e=>{const a=e.gameState.grid.map(((a,r)=>(0,t.jsx)(s,{index:r,tokens:a,gameState:e.gameState,gameConfig:e.gameConfig,onClick:()=>e.placeToken(r,e.gameState.currentPlayer)},"column-".concat(r))));return(0,t.jsx)("div",{className:"board",children:a})},g=e=>{let a="";return a=void 0!==e.gameState.winner?"".concat(e.gameState.winner===o.Cc.PlayerOne?e.gameConfig.playerOneName:e.gameConfig.playerTwoName," wins!"):"Draw!",(0,t.jsxs)("div",{className:"end-screen",children:[(0,t.jsx)("h1",{className:"end-message",children:a}),(0,t.jsx)("form",{onSubmit:a=>{a.preventDefault(),e.setGameStage(o.hZ.Start),e.resetGame()},children:(0,t.jsx)("input",{type:"submit",value:"Rematch"})})]})};var i=r(555);const m=(e,a)=>({grid:new Array(e).fill([]),boardHeight:a,currentPlayer:o.Cc.PlayerOne,gameStage:o.hZ.Start,winner:void 0}),u=(e,a)=>{const[r,t]=(0,n.useState)(m(e,a));return[r,e=>{t((0,i.A)((0,i.A)({},r),{},{gameStage:e}))},(e,a)=>{t((e=>{return(0,i.A)((0,i.A)({},e),{},{currentPlayer:(a=e.currentPlayer,a===o.Cc.PlayerOne?o.Cc.PlayerTwo:o.Cc.PlayerOne)});var a})(((e,a)=>{const r=(r,n)=>{let t=(0,i.A)({},a),l=0;for(;l<o.IW-1&&(t={row:t.row+=r,col:t.col+=n},void 0!==e.grid[t.col]&&e.grid[t.col][t.row]===e.currentPlayer);l++);return l};return r(-1,-1)+1+r(1,1)>=o.IW||r(-1,0)+1+r(1,0)>=o.IW||r(-1,1)+1+r(1,-1)>=o.IW||r(0,-1)+1+r(0,1)>=o.IW?(0,i.A)((0,i.A)({},e),{},{gameStage:o.hZ.End,winner:e.currentPlayer}):0===e.grid.filter((a=>a.length<e.boardHeight)).length?(0,i.A)((0,i.A)({},e),{},{gameStage:o.hZ.End,winner:void 0}):e})((0,i.A)((0,i.A)({},r),{},{grid:r.grid.map(((r,n)=>n===e?r.concat(a):r))}),{row:r.grid[e].length,col:e})))},()=>{t(m(e,a))}]},d=e=>{const a=a=>{e.setGameConfig((0,i.A)((0,i.A)({},e.gameConfig),{},{[a.target.name]:a.target.value}))},r=e.player===o.Cc.PlayerOne;return(0,t.jsxs)("div",{className:"user-conf-card",children:[(0,t.jsx)("div",{className:"avatar-wrapper",children:(0,t.jsx)(l,{colour:r?e.gameConfig.playerOneColour:e.gameConfig.playerTwoColour})}),(0,t.jsx)("label",{children:(0,t.jsx)("input",{type:"text",name:r?"playerOneName":"playerTwoName",value:r?e.gameConfig.playerOneName:e.gameConfig.playerTwoName,onChange:a})}),(0,t.jsx)("br",{}),Object.values(o.ev).map((n=>(0,t.jsxs)("label",{className:"radio",children:[(0,t.jsx)("input",{type:"radio",name:r?"playerOneColour":"playerTwoColour",value:n,onChange:a,checked:(r?e.gameConfig.playerOneColour:e.gameConfig.playerTwoColour)===n,disabled:n===e.disabledColour}),(0,t.jsx)(l,{colour:n,phantom:n===e.disabledColour})]},"radio-".concat(e.player,"-").concat(n))))]})},C=e=>(0,t.jsxs)("div",{className:"start-screen",children:[(0,t.jsx)("h1",{children:"Choose your names and token colours:"}),(0,t.jsxs)("form",{onSubmit:a=>{a.preventDefault(),e.setGameStage(o.hZ.Ongoing)},children:[(0,t.jsxs)("div",{className:"conf-container",children:[(0,t.jsx)(d,{player:o.Cc.PlayerOne,gameConfig:e.gameConfig,setGameConfig:e.setGameConfig,disabledColour:e.gameConfig.playerTwoColour}),(0,t.jsx)(d,{player:o.Cc.PlayerTwo,gameConfig:e.gameConfig,setGameConfig:e.setGameConfig,disabledColour:e.gameConfig.playerOneColour})]}),(0,t.jsx)("input",{type:"submit",value:"Start"})]})]}),p=()=>{const[e,a,r,l]=u(o.yi,o.pv),[s,i]=(0,n.useState)({playerOneName:"Player 1",playerTwoName:"Player 2",playerOneColour:o.ev.Green,playerTwoColour:o.ev.Purple});return(0,t.jsxs)("div",{className:"App",children:[e.gameStage===o.hZ.Start?(0,t.jsx)(C,{gameState:e,gameConfig:s,setGameStage:a,setGameConfig:i}):(0,t.jsx)(t.Fragment,{}),e.gameStage!==o.hZ.Start?(0,t.jsx)(c,{gameState:e,gameConfig:s,placeToken:r}):(0,t.jsx)(t.Fragment,{}),e.gameStage===o.hZ.End?(0,t.jsx)(g,{gameState:e,setGameStage:a,resetGame:l,gameConfig:s}):(0,t.jsx)(t.Fragment,{})]})}}}]);
//# sourceMappingURL=4.b7450c68.chunk.js.map